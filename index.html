<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Reaksi Saluran Biru Bercahaya</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <style>
    /* RESET */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    :root {
      --glass-bg: rgba(8, 20, 48, 0.75);
      --glass-bg-strong: rgba(4, 16, 40, 0.9);
      --border-glow: rgba(99, 179, 237, 0.6);
      --accent: #4fc3f7;
      --accent-strong: #00b0ff;
      --text-main: #e6f3ff;
      --text-muted: #90a4c8;
      --danger: #fb7185;
    }
    html, body {
      height: 100%;
      font-family: "Poppins", system-ui, sans-serif;
      color: var(--text-main);
      background:#020617;
    }

    /* BACKGROUND */
    .app {
      min-height: 100vh;
      padding: 1.6rem;
      position: relative;
      display: flex;
      align-items: stretch;
      justify-content: center;
      background-image:
        linear-gradient(135deg, rgba(6, 14, 36, 0.55), rgba(6, 14, 36, 0.85)),
        url("https://files.catbox.moe/q9e70e.jpg");
      background-size: cover;
      background-position: center;
      overflow: hidden;
    }
    .orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(40px);
      mix-blend-mode: screen;
      opacity: 0.72;
      animation: float 18s ease-in-out infinite alternate;
      pointer-events: none;
    }
    .orb-1 { width:420px;height:420px;top:-80px;left:-60px;background:radial-gradient(circle at 30% 30%,#60a5fa,transparent 60%);}
    .orb-2 { width:380px;height:380px;bottom:-50px;right:-70px;background:radial-gradient(circle at 70% 70%,#22d3ee,transparent 65%);animation-delay:4s;}
    .orb-3 { width:260px;height:260px;bottom:15%;left:10%;background:radial-gradient(circle at 50% 50%,#38bdf8,transparent 65%);animation-delay:8s;}
    @keyframes float {
      0% { transform: translate(0,0); }
      50% { transform: translate(20px,-30px); }
      100% { transform: translate(-10px,10px); }
    }

    /* LAYOUT */
    .container {
      position: relative;
      z-index: 2;
      width: 100%;
      max-width: 880px;
      margin: auto;
      display: flex;
      flex-direction: column;
      gap: 1.8rem;
    }

    /* HEADER */
    .title-box {
      text-align: center;
      color: #e5f2ff;
      text-shadow: 0 0 18px rgba(15, 23, 42, 0.9);
    }
    .title-top {
      display:inline-flex;
      padding:0.18rem 0.9rem;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      font-size:0.75rem;
      letter-spacing:0.18em;
      text-transform:uppercase;
      color:var(--text-muted);
      background:radial-gradient(circle at 0 0,rgba(56,189,248,0.4),transparent 55%);
      backdrop-filter:blur(10px);
    }
    .title-main {
      font-size:2.5rem;
      font-weight:700;
      margin-top:0.6rem;
      letter-spacing:0.06em;
      text-transform:uppercase;
    }
    .title-main span {
      color:#38bdf8;
      text-shadow:
        0 0 18px rgba(56,189,248,0.7),
        0 0 40px rgba(37,99,235,0.6);
    }
    .title-sub {
      margin-top:0.4rem;
      font-size:0.95rem;
      color:var(--text-muted);
      max-width:520px;
      margin-inline:auto;
    }

    /* CARD BASE */
    .card {
      background: var(--glass-bg);
      border: 1px solid var(--border-glow);
      border-radius: 24px;
      backdrop-filter: blur(22px);
      padding: 1.5rem 1.6rem;
      box-shadow:
        0 18px 40px rgba(15,23,42,0.96),
        0 0 32px rgba(37,99,235,0.6);
      position: relative;
      overflow: hidden;
    }
    .card::before {
      content:"";
      position:absolute;
      inset:-40%;
      background:
        radial-gradient(circle at 0 0,rgba(56,189,248,0.22),transparent 60%),
        radial-gradient(circle at 100% 120%,rgba(37,99,235,0.26),transparent 60%);
      opacity:0.7;
      mix-blend-mode:screen;
      pointer-events:none;
    }
    .card-inner {
      position:relative;
      z-index:1;
    }

    /* FORM CARD */
    .form-grid {
      display:grid;
      grid-template-columns: minmax(0,2fr) minmax(0,1.3fr);
      gap:1.4rem;
      align-items:flex-start;
    }
    .field-group {
      margin-bottom:0.85rem;
    }
    .field-label {
      font-size:0.86rem;
      color:var(--text-muted);
      margin-bottom:0.25rem;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    .field-label span {
      font-size:0.7rem;
    }
    .input {
      width:100%;
      padding:0.75rem 1rem;
      border-radius:14px;
      border:1px solid rgba(148,163,184,0.55);
      outline:none;
      font-size:0.93rem;
      background:rgba(15,23,42,0.9);
      color:var(--text-main);
      transition:0.18s;
    }
    .input::placeholder {
      color:rgba(148,163,184,0.7);
    }
    .input:focus {
      border-color:var(--accent);
      box-shadow:0 0 16px rgba(56,189,248,0.5);
    }

    .preset-row {
      display:flex;
      flex-wrap:wrap;
      gap:0.4rem;
      margin-top:0.3rem;
    }
    .preset-pill {
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      padding:0.2rem 0.6rem;
      font-size:0.78rem;
      cursor:pointer;
      background:rgba(15,23,42,0.8);
      color:var(--text-muted);
      display:flex;
      align-items:center;
      gap:0.2rem;
      transition:0.15s;
    }
    .preset-pill span {
      font-size:1rem;
    }
    .preset-pill:hover {
      border-color:var(--accent);
      color:var(--text-main);
      box-shadow:0 0 12px rgba(56,189,248,0.4);
    }

    .helper-text {
      font-size:0.75rem;
      color:var(--text-muted);
      margin-top:0.25rem;
    }

    /* BUTTON / ACTION */
    .btn {
      position:relative;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:0.4rem;
      padding:0.78rem 1.6rem;
      border-radius:999px;
      border:1px solid rgba(56,189,248,0.95);
      background-image:linear-gradient(135deg,rgba(37,99,235,0.15),rgba(56,189,248,0.96));
      color:#e0f2fe;
      font-size:0.94rem;
      font-weight:600;
      cursor:pointer;
      overflow:hidden;
      box-shadow:
        0 0 18px rgba(56,189,248,0.7),
        0 0 36px rgba(37,99,235,0.7);
      transition:0.18s;
      background-size:200% 200%;
      background-position:0% 50%;
    }
    .btn:hover:not(.btn--disabled) {
      transform:translateY(-2px);
      box-shadow:
        0 0 26px rgba(56,189,248,0.95),
        0 0 60px rgba(37,99,235,0.9);
      background-position:100% 50%;
    }
    .btn::after {
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(120deg,transparent,rgba(248,250,252,0.8),transparent);
      transform:translateX(-120%);
      opacity:0.9;
      pointer-events:none;
    }
    .btn:hover:not(.btn--disabled)::after {
      animation:shine 0.7s ease-out forwards;
    }
    @keyframes shine {
      to { transform:translateX(120%); }
    }
    .btn--disabled {
      opacity:0.6;
      cursor:default;
      box-shadow:none;
    }
    .btn-spinner {
      width:14px;
      height:14px;
      border-radius:999px;
      border:2px solid rgba(226,232,240,0.7);
      border-top-color:rgba(15,23,42,1);
      animation:spin 0.7s linear infinite;
    }
    @keyframes spin {
      to { transform:rotate(360deg); }
    }

    .btn-secondary {
      background:rgba(15,23,42,0.85);
      border-color:rgba(148,163,184,0.7);
      box-shadow:none;
      font-weight:500;
    }
    .btn-secondary:hover {
      box-shadow:0 0 12px rgba(148,163,184,0.6);
      background:rgba(15,23,42,0.95);
    }

    /* RESULT CARD */
    .result-card {
      display:none;
      margin-top:1.1rem;
      background:var(--glass-bg-strong);
    }
    .result-header {
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:1rem;
    }
    .result-title {
      font-size:1.15rem;
      font-weight:600;
    }
    .result-sub {
      font-size:0.82rem;
      color:var(--text-muted);
      margin-top:0.18rem;
    }

    .status-badge {
      padding:0.28rem 0.7rem;
      border-radius:999px;
      border:1px solid;
      font-size:0.78rem;
      letter-spacing:0.12em;
      text-transform:uppercase;
    }
    .status-ok {
      border-color:rgba(34,197,94,0.75);
      background:rgba(34,197,94,0.18);
      color:#bbf7d0;
      box-shadow:0 0 14px rgba(34,197,94,0.45);
    }
    .status-fail {
      border-color:rgba(248,113,113,0.8);
      background:rgba(248,113,113,0.18);
      color:#fecaca;
      box-shadow:0 0 14px rgba(248,113,113,0.45);
    }

    .result-message {
      margin-top:0.85rem;
      padding:0.8rem 1rem;
      border-radius:14px;
      border:1px solid rgba(56,189,248,0.55);
      background:radial-gradient(circle at 0 0,rgba(56,189,248,0.4),transparent 70%);
      font-size:0.93rem;
    }

    .reactions-row {
      margin-top:0.9rem;
      display:flex;
      flex-wrap:wrap;
      gap:0.6rem;
      justify-content:center;
    }
    .reaction-emoji {
      font-size:2.1rem;
      filter:drop-shadow(0 0 9px rgba(56,189,248,0.9));
      animation:floatEmoji 3s ease-in-out infinite;
    }
    @keyframes floatEmoji {
      0% { transform:translateY(0);opacity:0.8; }
      50% { transform:translateY(-10px) scale(1.05);opacity:1; }
      100% { transform:translateY(0);opacity:0.9; }
    }

    .note-box {
      margin-top:1rem;
      border-radius:16px;
      border:1px solid rgba(148,163,184,0.6);
      background:linear-gradient(135deg,rgba(15,23,42,0.96),rgba(15,23,42,0.9));
      padding:0.95rem 1.1rem;
      font-size:0.9rem;
    }
    .meta-row {
      margin-top:0.9rem;
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:0.4rem;
      font-size:0.8rem;
      color:var(--text-muted);
    }

    /* HISTORY */
    .history-card {
      margin-top:0.8rem;
    }
    .history-title {
      font-size:0.9rem;
      margin-bottom:0.4rem;
      color:var(--text-muted);
    }
    .history-list {
      display:flex;
      flex-wrap:wrap;
      gap:0.4rem;
    }
    .history-pill {
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      padding:0.25rem 0.7rem;
      font-size:0.78rem;
      cursor:pointer;
      background:rgba(15,23,42,0.85);
      color:var(--text-main);
      display:flex;
      align-items:center;
      gap:0.35rem;
      transition:0.15s;
    }
    .history-pill span {
      font-size:0.95rem;
    }
    .history-pill:hover {
      border-color:var(--accent);
      box-shadow:0 0 12px rgba(56,189,248,0.5);
    }

    /* TOAST */
    .toast {
      position:fixed;
      left:50%;
      bottom:1.2rem;
      transform:translateX(-50%) translateY(120%);
      padding:0.6rem 1.2rem;
      border-radius:999px;
      background:rgba(15,23,42,0.9);
      border:1px solid rgba(148,163,184,0.7);
      font-size:0.8rem;
      color:var(--text-main);
      display:flex;
      align-items:center;
      gap:0.4rem;
      box-shadow:0 12px 30px rgba(15,23,42,0.9);
      opacity:0;
      transition:0.25s;
      z-index:40;
    }
    .toast--show {
      transform:translateX(-50%) translateY(0);
      opacity:1;
    }
    .toast--error {
      border-color:rgba(248,113,113,0.9);
      color:#fecaca;
    }

    /* FOOTER */
    .footer {
      text-align:center;
      font-size:0.8rem;
      color:var(--text-muted);
      margin-top:0.4rem;
      text-shadow:0 0 14px rgba(15,23,42,0.95);
    }

    /* RESPONSIVE */
    @media (max-width: 820px) {
      .app { padding:1.2rem; }
      .form-grid { grid-template-columns:1fr; }
    }
    @media (max-width: 540px) {
      .title-main { font-size:2.1rem; }
      .card { padding:1.3rem 1.2rem; }
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div class="container">
      <header class="title-box">
        <div class="title-top"> Ä·¥á·¥Ä·¥Ñ·¥õ ·¥ò·¥ás·¥Ä…¥ s·¥Ä ü·¥ú Ä·¥Ä…¥</div>
        <div class="title-main">ùêëùêÑùêÄùêÇùêì<span>ùêÇùêáùêÄùêçùêçùêÑùêã</span> ùêÅùêò ùêëùêÄùêò</div>
        <p class="title-sub">
         ·¥ç·¥Äs·¥ú·¥ã·¥Ä…¥ ·¥õ·¥Ä·¥ú·¥õ·¥Ä…¥  ü…™…¥·¥ã ·¥ò·¥ás·¥Ä…¥ 
        </p>
      </header>

      <!-- FORM + RESULT CARD -->
      <section class="card">
        <div class="card-inner">
          <div class="form-grid">
            <!-- FORM SIDE -->
            <div>
              <div class="field-group">
                <label class="field-label">
                  ·¥ú Ä ü ·¥ò·¥ás·¥Ä…¥ s·¥Ä ü·¥ú Ä·¥Ä…¥
                  <span>‚ú®</span>
                </label>
                <input
                  id="input-url"
                  class="input"
                  type="text"
                  placeholder=""
                  value=""
                />
                <p class="helper-text">
                  ·¥ò·¥Äs·¥õ…™·¥ã·¥Ä…¥  ü…™…¥·¥ã  ü·¥Ä…¥…¢s·¥ú…¥…¢ ·¥ç·¥á…¥·¥ú·¥ä·¥ú ·¥Ñ ú·¥Ä…¥…¥·¥á ü ·¥ò·¥ú ô ü…™·¥ã.
                </p>
              </div>

              <div class="field-group">
                <label class="field-label">
                  ·¥á·¥ç·¥è·¥ä…™  Ä·¥á·¥Ä·¥ãs…™
                  <span>·¥ò…™s·¥Ä ú·¥ã·¥Ä…¥ ·¥Ö·¥á…¥…¢·¥Ä…¥ ·¥ã·¥è·¥ç·¥Ä ·¥ä…™·¥ã·¥Ä …™…¥…¢…™…¥ ·¥ç·¥á…¥·¥Ä·¥ç ô·¥Ä ú ·¥á·¥ç·¥è·¥ä…™  Ä·¥á·¥Ä·¥Ñ·¥õ</span>
                </label>
                <input
                  id="input-react"
                  class="input"
                  type="text"
                  placeholder="ü´£,ü•Ä"
                  value="ü´£,ü•Ä"
                />
                <div class="preset-row">
                  <button type="button" class="preset-pill" data-react="ü§®,üòà,ü´£">
                    <span>ü§®üòà</span> ·¥Ö·¥á“ì·¥Ä·¥ú ü·¥õ
                  </button>
                  <button type="button" class="preset-pill" data-react="üî•,üí•,‚ö°">
                    <span>üî•</span>  ú è·¥ò·¥á
                  </button>
                  <button type="button" class="preset-pill" data-react="üòÇ,ü§£,üòπ">
                    <span>üòÇ</span> …¥…¢·¥Ä·¥ã·¥Ä·¥ã
                  </button>
                  <button type="button" class="preset-pill" data-react="‚ù§Ô∏è,ü•Ä,üíî">
                    <span>‚ù§Ô∏è</span>  ô·¥Ä·¥ò·¥á Ä
                  </button>
                </div>
              </div>

              <div style="display:flex;gap:0.6rem;margin-top:0.8rem;flex-wrap:wrap;">
                <button id="submit-btn" class="btn" type="button">
                  <span id="submit-label">Proses Reaksi</span>
                  <span id="submit-spinner" class="btn-spinner" style="display:none;"></span>
                </button>
                <button id="clear-history-btn" class="btn btn-secondary" type="button">
                  Hapus History
                </button>
              </div>
            </div>

            <!-- RESULT SIDE -->
            <div>
              <div id="result-card" class="result-card">
                <div class="result-header">
                  <div>
                    <div class="result-title">Hasil Pemrosesan</div>
                    <div class="result-sub" id="result-sub">
                      Menampilkan respon terakhir dari API.
                    </div>
                  </div>
                  <span id="status-badge" class="status-badge">Status</span>
                </div>

                <div id="result-message" class="result-message"></div>

                <div id="reactions-row" class="reactions-row"></div>

                <div class="note-box">
                  <strong>Catatan:</strong>
                  <p id="result-note"></p>
                </div>

                <div class="meta-row">
                  <span id="result-creator"></span>
                  <span id="result-react-used"></span>
                </div>

                <div style="margin-top:0.9rem;display:flex;gap:0.6rem;flex-wrap:wrap;">
                  <a id="result-link" href="#" target="_blank" class="btn" style="font-size:0.86rem;">
                    Buka Channel
                  </a>
                  <button id="replay-btn" type="button" class="btn btn-secondary" style="font-size:0.86rem;">
                    Gunakan Lagi Kombinasi Ini
                  </button>
                </div>
              </div>

              <!-- HISTORY -->
              <div class="history-card">
                <div class="history-title">History Kombinasi :</div>
                <div id="history-list" class="history-list"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer class="footer" id="footer-meta">
        ·¥ò·¥è·¥°·¥á Ä·¥á·¥Ö  ô è  ú·¥õ·¥ç ü&amp; ·¥äs‚Ä¢  Ä·¥Ä è
      </footer>
    </div>

    <!-- TOAST -->
    <div id="toast" class="toast"></div>
  </div>

<script>
  const submitBtn = document.getElementById("submit-btn");
  const submitLabel = document.getElementById("submit-label");
  const submitSpinner = document.getElementById("submit-spinner");
  const inputUrl = document.getElementById("input-url");
  const inputReact = document.getElementById("input-react");
  const resultCard = document.getElementById("result-card");
  const statusBadge = document.getElementById("status-badge");
  const resultMessage = document.getElementById("result-message");
  const reactionsRow = document.getElementById("reactions-row");
  const resultNote = document.getElementById("result-note");
  const resultCreator = document.getElementById("result-creator");
  const resultReactUsed = document.getElementById("result-react-used");
  const resultLink = document.getElementById("result-link");
  const resultSub = document.getElementById("result-sub");
  const replayBtn = document.getElementById("replay-btn");
  const historyList = document.getElementById("history-list");
  const clearHistoryBtn = document.getElementById("clear-history-btn");
  const footerMeta = document.getElementById("footer-meta");
  const toast = document.getElementById("toast");

  const HISTORY_KEY = "channelReactionHistory_v1";

  function showToast(msg, isError = false) {
    toast.textContent = msg;
    toast.classList.toggle("toast--error", isError);
    toast.classList.add("toast--show");
    setTimeout(() => {
      toast.classList.remove("toast--show");
    }, 2600);
  }

  function setLoading(isLoading) {
    if (isLoading) {
      submitBtn.classList.add("btn--disabled");
      submitBtn.disabled = true;
      submitLabel.textContent = "Memproses...";
      submitSpinner.style.display = "inline-block";
    } else {
      submitBtn.classList.remove("btn--disabled");
      submitBtn.disabled = false;
      submitLabel.textContent = "Proses Reaksi";
      submitSpinner.style.display = "none";
    }
  }

  function saveHistory(url, react) {
    try {
      const entry = { url, react, time: Date.now() };
      const existing = JSON.parse(localStorage.getItem(HISTORY_KEY) || "[]");
      // cek duplikat simple
      const filtered = existing.filter(
        (e) => !(e.url === url && e.react === react)
      );
      filtered.unshift(entry);
      const limited = filtered.slice(0, 10); // max 10 history
      localStorage.setItem(HISTORY_KEY, JSON.stringify(limited));
      renderHistory();
    } catch (e) {
      console.warn("Gagal simpan history:", e);
    }
  }

  function loadHistory() {
    try {
      return JSON.parse(localStorage.getItem(HISTORY_KEY) || "[]");
    } catch {
      return [];
    }
  }

  function clearHistory() {
    localStorage.removeItem(HISTORY_KEY);
    renderHistory();
    showToast("History dihapus.");
  }

  function renderHistory() {
    const history = loadHistory();
    historyList.innerHTML = "";
    if (!history.length) {
      const span = document.createElement("span");
      span.style.fontSize = "0.78rem";
      span.style.color = "var(--text-muted)";
      span.textContent = "Belum ada history.";
      historyList.appendChild(span);
      return;
    }
    history.forEach((item) => {
      const pill = document.createElement("button");
      pill.type = "button";
      pill.className = "history-pill";
      pill.innerHTML = `<span>üîÅ</span><span>${item.react}</span>`;
      pill.title = item.url;
      pill.addEventListener("click", () => {
        inputUrl.value = item.url;
        inputReact.value = item.react;
        showToast("History dipakai. Klik Proses untuk kirim lagi.");
      });
      historyList.appendChild(pill);
    });
  }

  async function handleSubmit() {
    const url = inputUrl.value.trim();
    const react = inputReact.value.trim();

    if (!url) {
      showToast("URL channel belum diisi.", true);
      return;
    }
    if (!react) {
      showToast("Emoji belum diisi.", true);
      return;
    }

    const apiUrl =
  "https://react.whyux-xec.my.id/api/rch" +
  "?link=" + encodeURIComponent(url) +
  "&emoji=" + encodeURIComponent(react);

    setLoading(true);
    resultSub.textContent = "Menunggu respon dari API...";
    resultCard.style.display = "block";
    resultMessage.textContent = "Memproses permintaan...";
    reactionsRow.innerHTML = "";
    resultNote.textContent = "";
    resultCreator.textContent = "";
    resultReactUsed.textContent = "";
    statusBadge.textContent = "Loading...";
    statusBadge.className = "status-badge";

    try {
      const res = await fetch(apiUrl, {
  method: "GET",
  headers: {
    "x-api-key": "663355390a4550d8c6d1e8c4e7159225d17456ada270c61a23572d730f41ef18"
  }
});
      if (!res.ok) throw new Error("HTTP " + res.status);
      const data = await res.json();

      statusBadge.textContent = data.status ? "Sukses" : "Gagal";
      statusBadge.className = "status-badge " + (data.status ? "status-ok" : "status-fail");

      resultMessage.textContent = data.message || "Reaksi berhasil diproses.";
      resultNote.textContent = data.info?.note || "Silakan cek channel Anda.";
      resultCreator.textContent = "Dibuat oleh " + (data.creator || "Faa");
      resultReactUsed.textContent = "Reaksi digunakan: " + (data.info?.reaction_used || react);
      resultSub.textContent = "Respon terakhir dari API berhasil dimuat.";
      resultLink.href = data.info?.destination || url;
      footerMeta.textContent = "Powered by HTML & JS ‚Ä¢ API by " + (data.creator || "Faa");

      reactionsRow.innerHTML = "";
      const used = (data.info?.reaction_used || react)
        .split(",")
        .map((e) => e.trim())
        .filter(Boolean);

      used.forEach((emoji, idx) => {
        const span = document.createElement("span");
        span.className = "reaction-emoji";
        span.textContent = emoji;
        span.style.animationDelay = (idx * 0.2) + "s";
        reactionsRow.appendChild(span);
      });

      saveHistory(url, react);
      showToast("Berhasil memproses reaksi.");
    } catch (err) {
      console.error(err);
      statusBadge.textContent = "Error";
      statusBadge.className = "status-badge status-fail";
      resultMessage.textContent = "Terjadi kesalahan saat memproses API.";
      resultNote.textContent = "Pastikan API aktif dan koneksi internet stabil.";
      resultSub.textContent = "Gagal memuat respon API.";
      showToast("Gagal menghubungi API.", true);
    } finally {
      setLoading(false);
    }
  }

  // tombol preset emoji
  document.querySelectorAll(".preset-pill").forEach((btn) => {
    btn.addEventListener("click", () => {
      const val = btn.getAttribute("data-react");
      inputReact.value = val;
      showToast("Emoji preset dipilih.");
    });
  });

  // tombol utama
  submitBtn.addEventListener("click", handleSubmit);

  // enter di input react juga submit
  inputReact.addEventListener("keydown", (e) => {
    if (e.key === "Enter") handleSubmit();
  });

  // replay data dari result ke form
  replayBtn.addEventListener("click", () => {
    const currentUrl = resultLink.href;
    const reactUsed = resultReactUsed.textContent.replace("Reaksi digunakan: ", "").trim();
    if (currentUrl) inputUrl.value = currentUrl;
    if (reactUsed) inputReact.value = reactUsed;
    showToast("Kombinasi dari hasil dipakai lagi.");
  });

  clearHistoryBtn.addEventListener("click", clearHistory);

  // initial render history
  renderHistory();
</script>
</body>
</html>
